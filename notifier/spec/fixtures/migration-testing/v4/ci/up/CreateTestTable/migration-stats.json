{"version":20210602144718,"name":"CreateTestTable","walltime":1.9109571874141693,"success":true,"total_database_size_change":24576,"query_statistics":[{"query":"select pg_database_size(current_database()) /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/total_database_size_change.rb:25:in `get_total_database_size'*/","calls":1,"total_time":150.822085,"max_time":150.822085,"mean_time":150.822085,"rows":1},{"query":"CREATE TABLE \"test_tables\" (\"id\" bigserial primary key, \"stars\" bigint DEFAULT 0 NOT NULL, \"created_at\" timestamp(6) NOT NULL, \"updated_at\" timestamp(6) NOT NULL, \"title\" text, \"notes\" text) /*application:test,db_config_name:ci,line:/lib/gitlab/database/migration_helpers.rb:100:in `block in create_table_with_constraints'*/","calls":1,"total_time":122.94353,"max_time":122.94353,"mean_time":122.94353,"rows":0},{"query":"SELECT \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":12.461834999999999,"max_time":12.461834999999999,"mean_time":12.461834999999999,"rows":1},{"query":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation \u003c\u003e t.typcollation\n WHERE a.attrelid = $1::regclass\n   AND a.attnum \u003e $2 AND NOT a.attisdropped\n ORDER BY a.attnum","calls":1,"total_time":8.746094,"max_time":8.746094,"mean_time":8.746094,"rows":4},{"query":"ALTER TABLE \"test_tables\"\nADD CONSTRAINT \"check_0770ba173a\" CHECK (char_length(\"title\") \u003c= 128),\nADD CONSTRAINT \"check_9cfc473dbc\" CHECK (char_length(\"notes\") \u003c= 1024)\n /*application:test,db_config_name:ci,line:/lib/gitlab/database/migration_helpers.rb:128:in `block in create_table_with_constraints'*/","calls":1,"total_time":8.345117,"max_time":8.345117,"mean_time":8.345117,"rows":0},{"query":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas($1)) AND c.relkind IN ($2,$3,$4,$5,$6)","calls":1,"total_time":3.913972,"max_time":3.913972,"mean_time":3.913972,"rows":603},{"query":"SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":3.0508900000000003,"max_time":3.0508900000000003,"mean_time":3.0508900000000003,"rows":5385},{"query":"INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\" /*application:test,db_config_name:ci,line:/lib/gitlab/database.rb:332:in `block in transaction'*/","calls":1,"total_time":2.663913,"max_time":2.663913,"mean_time":2.663913,"rows":1},{"query":"select pg_stat_statements_reset() /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/query_statistics.rb:16:in `before'*/","calls":1,"total_time":0.247091,"max_time":0.247091,"mean_time":0.247091,"rows":1},{"query":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas($1)) AND c.relname = $2 AND c.relkind IN ($3,$4)","calls":3,"total_time":0.183331,"max_time":0.085203,"mean_time":0.061110333333333336,"rows":3},{"query":"SELECT t.oid, t.typname\nFROM pg_type as t\nWHERE t.typname IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.078373,"max_time":0.078373,"mean_time":0.078373,"rows":10},{"query":"UPDATE \"ar_internal_metadata\" SET \"value\" = $1, \"updated_at\" = $2 WHERE \"ar_internal_metadata\".\"key\" = $3 /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.076856,"max_time":0.076856,"mean_time":0.076856,"rows":1},{"query":"SET SESSION timezone TO 'UTC' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.044863,"max_time":0.044863,"mean_time":0.044863,"rows":0},{"query":"SET SESSION statement_timeout TO '120s' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.038363,"max_time":0.038363,"mean_time":0.038363,"rows":0},{"query":"SET intervalstyle = iso_8601 /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.034559,"max_time":0.034559,"mean_time":0.034559,"rows":0},{"query":"SELECT $1 FROM pg_proc WHERE proname = $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/schema_helpers.rb:20:in `function_exists?'*/","calls":1,"total_time":0.033893,"max_time":0.033893,"mean_time":0.033893,"rows":1},{"query":"SET standard_conforming_strings = on /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.032853,"max_time":0.032853,"mean_time":0.032853,"rows":0},{"query":"set client_encoding to 'UTF8'","calls":1,"total_time":0.025851,"max_time":0.025851,"mean_time":0.025851,"rows":0},{"query":"set client_encoding to 'unicode'","calls":1,"total_time":0.020529,"max_time":0.020529,"mean_time":0.020529,"rows":0},{"query":"SET LOCAL lock_timeout TO '100ms' /*application:test,db_config_name:ci,line:/lib/gitlab/database/with_lock_retries.rb:172:in `execute'*/","calls":1,"total_time":0.015339,"max_time":0.015339,"mean_time":0.015339,"rows":0},{"query":"SET client_min_messages TO 'warning' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.013366,"max_time":0.013366,"mean_time":0.013366,"rows":0},{"query":"SELECT pg_try_advisory_lock($1)","calls":1,"total_time":0.013238,"max_time":0.013238,"mean_time":0.013238,"rows":1},{"query":"SELECT pg_advisory_unlock($1)","calls":1,"total_time":0.012585,"max_time":0.012585,"mean_time":0.012585,"rows":1},{"query":"RESET idle_in_transaction_session_timeout","calls":1,"total_time":0.009762,"max_time":0.009762,"mean_time":0.009762,"rows":0},{"query":"SELECT $1::regtype::oid","calls":1,"total_time":0.009282,"max_time":0.009282,"mean_time":0.009282,"rows":1},{"query":"SELECT current_database()","calls":1,"total_time":0.009191000000000001,"max_time":0.009191000000000001,"mean_time":0.009191000000000001,"rows":1},{"query":"SHOW TIME ZONE /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.006331,"max_time":0.006331,"mean_time":0.006331,"rows":0},{"query":"COMMIT /*application:test,db_config_name:ci,line:/lib/gitlab/database.rb:365:in `commit'*/","calls":2,"total_time":0.0043560000000000005,"max_time":0.003024,"mean_time":0.0021780000000000002,"rows":0},{"query":"BEGIN /*application:test,db_config_name:ci,line:/lib/gitlab/database/with_lock_retries.rb:172:in `execute'*/","calls":1,"total_time":0.002924,"max_time":0.002924,"mean_time":0.002924,"rows":0},{"query":"SAVEPOINT active_record_1 /*application:test,db_config_name:ci,line:/lib/gitlab/database/with_lock_retries.rb:172:in `execute'*/","calls":1,"total_time":0.002924,"max_time":0.002924,"mean_time":0.002924,"rows":0},{"query":"RELEASE SAVEPOINT active_record_1 /*application:test,db_config_name:ci,line:/lib/gitlab/database/with_lock_retries.rb:129:in `run_block_with_lock_timeout'*/","calls":1,"total_time":0.002782,"max_time":0.002782,"mean_time":0.002782,"rows":0},{"query":"RESET lock_timeout /*application:test,db_config_name:ci,line:/lib/gitlab/database/with_lock_retries.rb:172:in `execute'*/","calls":1,"total_time":0.002119,"max_time":0.002119,"mean_time":0.002119,"rows":0},{"query":"BEGIN /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.001901,"max_time":0.001901,"mean_time":0.001901,"rows":0}]}