{"version":20221123151656,"name":"CreateInefficientlyOrderedColumnsTable","walltime":2.053293414413929,"success":true,"total_database_size_change":24576,"query_statistics":[{"query":"CREATE TABLE \"inefficiently_ordered_columns_tables\" (\"id\" bigserial primary key, \"text_attr\" text, \"numeric_attr\" decimal, \"jsonb_attr\" jsonb, \"inet_attr\" inet, \"int8range_attr\" int8range, \"boolean_attr\" boolean, \"int4range_attr\" int4range, \"oid_attr\" oid, \"integer_attr\" integer, \"date_attr\" date, \"datetime_with_timezone_attr\" timestamptz, \"time_attr\" time, \"float_attr\" float, \"bigint_attr\" bigint, \"uuid_attr\" uuid, \"created_at\" timestamptz NOT NULL, \"updated_at\" timestamptz NOT NULL, CONSTRAINT check_e3e98d6856 CHECK (char_length(\"text_attr\") \u003c= 255)) /*application:test,db_config_name:ci,line:/lib/gitlab/database/migration_helpers/v2.rb:46:in `create_table'*/","calls":1,"total_time":311.131115,"max_time":311.131115,"mean_time":311.131115,"rows":0},{"query":"select pg_database_size(current_database()) /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/total_database_size_change.rb:25:in `get_total_database_size'*/","calls":1,"total_time":83.043509,"max_time":83.043509,"mean_time":83.043509,"rows":1},{"query":"SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n       pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n       c.collname, col_description(a.attrelid, a.attnum) AS comment\n  FROM pg_attribute a\n  LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n  LEFT JOIN pg_type t ON a.atttypid = t.oid\n  LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation \u003c\u003e t.typcollation\n WHERE a.attrelid = $1::regclass\n   AND a.attnum \u003e $2 AND NOT a.attisdropped\n ORDER BY a.attnum","calls":1,"total_time":46.552967,"max_time":46.552967,"mean_time":46.552967,"rows":4},{"query":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas($1)) AND c.relkind IN ($2,$3,$4,$5,$6)","calls":1,"total_time":8.845359,"max_time":8.845359,"mean_time":8.845359,"rows":618},{"query":"INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\" /*application:test,db_config_name:ci,line:/lib/gitlab/database.rb:332:in `block in transaction'*/","calls":1,"total_time":8.605725,"max_time":8.605725,"mean_time":8.605725,"rows":1},{"query":"SELECT \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":5.143292,"max_time":5.143292,"mean_time":5.143292,"rows":1},{"query":"SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":3.247372,"max_time":3.247372,"mean_time":3.247372,"rows":5583},{"query":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas($1)) AND c.relname = $2 AND c.relkind IN ($3,$4)","calls":3,"total_time":0.23278900000000002,"max_time":0.097105,"mean_time":0.07759633333333334,"rows":3},{"query":"select pg_stat_statements_reset() /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/query_statistics.rb:16:in `before'*/","calls":1,"total_time":0.223142,"max_time":0.223142,"mean_time":0.223142,"rows":1},{"query":"SELECT t.oid, t.typname\nFROM pg_type as t\nWHERE t.typname IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.08146400000000001,"max_time":0.08146400000000001,"mean_time":0.08146400000000001,"rows":10},{"query":"UPDATE \"ar_internal_metadata\" SET \"value\" = $1, \"updated_at\" = $2 WHERE \"ar_internal_metadata\".\"key\" = $3 /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.052813,"max_time":0.052813,"mean_time":0.052813,"rows":1},{"query":"SET SESSION timezone TO 'UTC' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.050998,"max_time":0.050998,"mean_time":0.050998,"rows":0},{"query":"set client_encoding to 'UTF8'","calls":1,"total_time":0.030066,"max_time":0.030066,"mean_time":0.030066,"rows":0},{"query":"SELECT $1 FROM pg_proc WHERE proname = $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/schema_helpers.rb:20:in `function_exists?'*/","calls":1,"total_time":0.028673,"max_time":0.028673,"mean_time":0.028673,"rows":1},{"query":"SET standard_conforming_strings = on /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.026632,"max_time":0.026632,"mean_time":0.026632,"rows":0},{"query":"SET intervalstyle = iso_8601 /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.026068,"max_time":0.026068,"mean_time":0.026068,"rows":0},{"query":"SET SESSION statement_timeout TO '120s' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.025628,"max_time":0.025628,"mean_time":0.025628,"rows":0},{"query":"set client_encoding to 'unicode'","calls":1,"total_time":0.019184,"max_time":0.019184,"mean_time":0.019184,"rows":0},{"query":"SELECT pg_try_advisory_lock($1)","calls":1,"total_time":0.017712,"max_time":0.017712,"mean_time":0.017712,"rows":1},{"query":"SET client_min_messages TO 'warning' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.013969,"max_time":0.013969,"mean_time":0.013969,"rows":0},{"query":"SELECT pg_advisory_unlock($1)","calls":1,"total_time":0.010466,"max_time":0.010466,"mean_time":0.010466,"rows":1},{"query":"SELECT current_database()","calls":1,"total_time":0.009223,"max_time":0.009223,"mean_time":0.009223,"rows":1},{"query":"SHOW TIME ZONE /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.005742,"max_time":0.005742,"mean_time":0.005742,"rows":0},{"query":"COMMIT /*application:test,db_config_name:ci,line:/lib/gitlab/database.rb:365:in `commit'*/","calls":2,"total_time":0.00327,"max_time":0.001942,"mean_time":0.001635,"rows":0},{"query":"BEGIN /*application:test,db_config_name:ci,line:/lib/gitlab/database/migration_helpers/v2.rb:46:in `create_table'*/","calls":1,"total_time":0.001935,"max_time":0.001935,"mean_time":0.001935,"rows":0},{"query":"BEGIN /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:131:in `block (3 levels) in run'*/","calls":1,"total_time":0.001296,"max_time":0.001296,"mean_time":0.001296,"rows":0}]}