{"version":20220318174439,"name":"QueueTestBackgroundMigration","walltime":1.733779825270176,"success":true,"total_database_size_change":0,"query_statistics":[{"query":"select pg_database_size(current_database()) /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/total_database_size_change.rb:25:in `get_total_database_size'*/","calls":1,"total_time":122.137679,"max_time":122.137679,"mean_time":122.137679,"rows":1},{"query":"SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":2.402208,"max_time":2.402208,"mean_time":2.402208,"rows":5390},{"query":"select pg_stat_statements_reset() /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/observers/query_statistics.rb:16:in `before'*/","calls":1,"total_time":0.161961,"max_time":0.161961,"mean_time":0.161961,"rows":1},{"query":"SELECT t.oid, t.typname\nFROM pg_type as t\nWHERE t.typname IN ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\n /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":2,"total_time":0.152553,"max_time":0.07665699999999999,"mean_time":0.0762765,"rows":20},{"query":"SELECT c.relname FROM pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace WHERE n.nspname = ANY (current_schemas($1)) AND c.relname = $2 AND c.relkind IN ($3,$4)","calls":3,"total_time":0.109689,"max_time":0.039924,"mean_time":0.036563,"rows":3},{"query":"INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\" /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/lock_retry_mixin.rb:36:in `ddl_transaction'*/","calls":1,"total_time":0.082841,"max_time":0.082841,"mean_time":0.082841,"rows":1},{"query":"SET SESSION timezone TO 'UTC' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.058797,"max_time":0.058797,"mean_time":0.058797,"rows":0},{"query":"set client_encoding to 'UTF8'","calls":2,"total_time":0.047276,"max_time":0.024346,"mean_time":0.023638,"rows":0},{"query":"SET SESSION timezone TO 'UTC' /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.042216,"max_time":0.042216,"mean_time":0.042216,"rows":0},{"query":"SET intervalstyle = iso_8601 /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.039727,"max_time":0.039727,"mean_time":0.039727,"rows":0},{"query":"SET standard_conforming_strings = on /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.039378,"max_time":0.039378,"mean_time":0.039378,"rows":0},{"query":"set client_encoding to 'unicode'","calls":2,"total_time":0.036962,"max_time":0.019254,"mean_time":0.018481,"rows":0},{"query":"SET standard_conforming_strings = on /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.032968,"max_time":0.032968,"mean_time":0.032968,"rows":0},{"query":"SET SESSION statement_timeout TO '120s' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.031529,"max_time":0.031529,"mean_time":0.031529,"rows":0},{"query":"SELECT \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.030488,"max_time":0.030488,"mean_time":0.030488,"rows":1},{"query":"SET intervalstyle = iso_8601 /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.03039,"max_time":0.03039,"mean_time":0.03039,"rows":0},{"query":"SELECT $1 FROM pg_proc WHERE proname = $2 /*application:test,db_config_name:ci,line:/lib/gitlab/database/schema_helpers.rb:20:in `function_exists?'*/","calls":1,"total_time":0.029587,"max_time":0.029587,"mean_time":0.029587,"rows":1},{"query":"SET SESSION statement_timeout TO '120s' /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.028506,"max_time":0.028506,"mean_time":0.028506,"rows":0},{"query":"SET client_min_messages TO 'warning' /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.014404,"max_time":0.014404,"mean_time":0.014404,"rows":0},{"query":"SELECT pg_advisory_unlock($1)","calls":1,"total_time":0.014072,"max_time":0.014072,"mean_time":0.014072,"rows":1},{"query":"SELECT pg_try_advisory_lock($1)","calls":1,"total_time":0.013364,"max_time":0.013364,"mean_time":0.013364,"rows":1},{"query":"SET client_min_messages TO 'warning' /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.013129,"max_time":0.013129,"mean_time":0.013129,"rows":0},{"query":"SELECT current_database()","calls":1,"total_time":0.010872,"max_time":0.010872,"mean_time":0.010872,"rows":1},{"query":"SHOW TIME ZONE /*application:test,db_config_name:unknown,line:/lib/gitlab/database/migrations/runner.rb:127:in `block (3 levels) in run'*/","calls":1,"total_time":0.006159,"max_time":0.006159,"mean_time":0.006159,"rows":0},{"query":"SHOW TIME ZONE /*application:test,correlation_id:8ec1920d4475735722d0f93a982ad894,endpoint_id:QueueTestBackgroundMigration,db_config_name:unknown,line:/app/models/concerns/transactions.rb:13:in `inside_transaction?'*/","calls":1,"total_time":0.005757,"max_time":0.005757,"mean_time":0.005757,"rows":0},{"query":"COMMIT /*application:test,db_config_name:ci,line:/lib/gitlab/database.rb:365:in `commit'*/","calls":1,"total_time":0.002096,"max_time":0.002096,"mean_time":0.002096,"rows":0},{"query":"BEGIN /*application:test,db_config_name:ci,line:/lib/gitlab/database/migrations/lock_retry_mixin.rb:36:in `ddl_transaction'*/","calls":1,"total_time":0.001725,"max_time":0.001725,"mean_time":0.001725,"rows":0}]}