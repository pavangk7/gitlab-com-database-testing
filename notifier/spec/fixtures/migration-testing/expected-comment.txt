<!-- gitlab-org/database-team/gitlab-com-database-testing:identifiable-note -->
### Database migrations

|           | 1 Warnings |
| --------- | -------------------- |
| :warning: | <b>20210604233157 - MigrationThrowsException</b> did not complete successfully, check the job log for details |

Migrations included in this change have been executed on gitlab.com data for testing purposes. For details, please see the [migration testing pipeline](https://gitlab.com/gitlab-org/database-team/gitlab-com-database-testing/-/pipelines/4711) (limited access).

| Migration | Type | Total runtime | Result | DB size change |
| --------- | ---- | ------------- | ------ | -------------- |
| 20210602144718 - CreateTestTable | Regular | 1.8 s | :white_check_mark: | +40.00 KiB |
| 20210604232017 - DropTestTable | Post deploy | 1.2 s | :white_check_mark: | -24.00 KiB |
| 20210604233157 - MigrationThrowsException | Post deploy | 0.9 s | :boom: | +0.00 B |

<details>
<summary>Runtime Histogram for all migrations</summary>

| Query Runtime | Count |
|---------------|-------|
|0 seconds - 0.01 seconds | 0 |
|0.01 seconds - 0.1 seconds | 61 |
|0.1 seconds - 1 second | 5 |
|1 second - 5 minutes | 0 |
|5 minutes + | 0 |

</details>


####  Migration: <b>20210602144718 - CreateTestTable</b>

* Type: Regular
* Duration: 1.8 s
* Database size change: +40.00 KiB

| Query | Calls | Total Time | Max Time | Mean Time | Rows |
| ----- | ----- | ---------- | -------- | --------- | ---- |
| <pre>CREATE&nbsp;TABLE&nbsp;"test_tables"&nbsp;("id"&nbsp;bigserial&nbsp;primary&nbsp;key,&nbsp;"stars"&nbsp;bigint&nbsp;DEFAULT&nbsp;0&nbsp;NOT&nbsp;NULL,&nbsp;"created_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"updated_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"title"&nbsp;text,&nbsp;"notes"&nbsp;text)&nbsp;&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 71.1 ms | 71.1 ms | 71.1 ms | 0 |
| <pre>ALTER&nbsp;TABLE&nbsp;"test_tables"&nbsp;ADD&nbsp;CONSTRAINT&nbsp;"check_0770ba173a"&nbsp;CHECK&nbsp;(char_length("title")&nbsp;<=&nbsp;128),&nbsp;ADD&nbsp;CONSTRAINT&nbsp;"check_9cfc473dbc"&nbsp;CHECK&nbsp;(char_length("notes")&nbsp;<=&nbsp;1024)<br />&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 6.4 ms | 6.4 ms | 6.4 ms | 0 |
| <pre>SELECT&nbsp;$1::regtype::oid</pre> | 1 | 0.0 ms | 0.0 ms | 0.0 ms | 1 |

<details>
<summary>Histogram for CreateTestTable</summary>

| Query Runtime | Count |
|---------------|-------|
|0 seconds - 0.01 seconds | 0 |
|0.01 seconds - 0.1 seconds | 28 |
|0.1 seconds - 1 second | 3 |
|1 second - 5 minutes | 0 |
|5 minutes + | 0 |

</details>

####  Migration: <b>20210604232017 - DropTestTable</b>

* Type: Post deploy
* Duration: 1.2 s
* Database size change: -24.00 KiB

| Query | Calls | Total Time | Max Time | Mean Time | Rows |
| ----- | ----- | ---------- | -------- | --------- | ---- |
| <pre>DROP&nbsp;TABLE&nbsp;"test_tables"&nbsp;&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 5.7 ms | 5.7 ms | 5.7 ms | 0 |

<details>
<summary>Histogram for DropTestTable</summary>

| Query Runtime | Count |
|---------------|-------|
|0 seconds - 0.01 seconds | 0 |
|0.01 seconds - 0.1 seconds | 19 |
|0.1 seconds - 1 second | 1 |
|1 second - 5 minutes | 0 |
|5 minutes + | 0 |

</details>

#### :boom: Migration: <b>20210604233157 - MigrationThrowsException</b>

* Type: Post deploy
* Duration: 0.9 s
* Database size change: +0.00 B


<details>
<summary>Histogram for MigrationThrowsException</summary>

| Query Runtime | Count |
|---------------|-------|
|0 seconds - 0.01 seconds | 0 |
|0.01 seconds - 0.1 seconds | 14 |
|0.1 seconds - 1 second | 1 |
|1 second - 5 minutes | 0 |
|5 minutes + | 0 |

</details>


<details>
  <summary>Other migrations pending on GitLab.com</summary>

  | Migration | Type | Total runtime | Result | DB size change |
| --------- | ---- | ------------- | ------ | -------------- |

</details>

#### Clone Details
| Clone ID | Clone Created At | Clone Data Timestamp | Expected Removal Time |
| -------- | ---------------- | -------------------- | --------------------- |
| [`database-testing-651277`](https://console.postgres.ai/gitlab/gitlab-production-tunnel/instances/59/clones/database-testing-651277) | 2021-06-15 16:06:07 UTC | 2021-06-15 12:00:12 UTC | 2021-06-16 04:07:40 +0000 |

#### [Artifacts](https://gitlab.com/gitlab-org/database-team/gitlab-com-database-testing/-/jobs/1354666720/artifacts/browse/migration-testing/)

---
Brought to you by [gitlab-org/database-team/gitlab-com-database-testing](https://gitlab.com/gitlab-org/database-team/gitlab-com-database-testing). [Epic](https://gitlab.com/groups/gitlab-org/database-team/-/epics/9)
<!-- JSON: eyJ2ZXJzaW9uIjoxLCJkYXRhIjpbeyJtaWdyYXRpb24iOjIwMjEwNjAyMTQ0
NzE4LCJ3YWxsdGltZSI6MS43ODcyODgxNTU0MDY3MTM1LCJ0b3RhbF9kYXRh
YmFzZV9zaXplX2NoYW5nZSI6NDA5NjAsInN1Y2Nlc3MiOnRydWV9LHsibWln
cmF0aW9uIjoyMDIxMDYwNDIzMjAxNywid2FsbHRpbWUiOjEuMTY1MjQ3NjU4
MjY3NjE3MiwidG90YWxfZGF0YWJhc2Vfc2l6ZV9jaGFuZ2UiOi0yNDU3Niwi
c3VjY2VzcyI6dHJ1ZX0seyJtaWdyYXRpb24iOjIwMjEwNjA0MjMzMTU3LCJ3
YWxsdGltZSI6MC45MzY0NDc1ODUwMDE1ODc5LCJ0b3RhbF9kYXRhYmFzZV9z
aXplX2NoYW5nZSI6MCwic3VjY2VzcyI6ZmFsc2V9XX0=
 -->