<!-- gitlab-org/database-team/gitlab-com-database-testing:identifiable-note -->
### Database migrations

|           | 1 Warnings |
| --------- | -------------------- |
| :warning: | <b>20210602144718 - CreateTestTable</b> had a query that [exceeded timing guidelines](https://docs.gitlab.com/ee/development/query_performance.html#timing-guidelines-for-queries). Run time should not exceed 100ms, but it was 269.888734 <pre>CREATE&nbsp;TABLE&nbsp;"test_tables"&nbsp;("id"&nbsp;bigserial&nbsp;primary&nbsp;key,&nbsp;"stars"&nbsp;bigint&nbsp;DEFAULT&nbsp;0&nbsp;NOT&nbsp;NULL,&nbsp;"created_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"updated_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"title"&nbsp;text,&nbsp;"notes"&nbsp;text)&nbsp;&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> |

Migrations included in this change have been executed on gitlab.com data for testing purposes. For details, please see the [migration testing pipeline](/-/pipelines/) (limited access).

| Migration | Type | Total runtime | Result | DB size change |
| --------- | ---- | ------------- | ------ | -------------- |
| 20210604232017 - DropTestTable | Post deploy | 1.2 s | :white_check_mark: | -24.00 KiB |
| 20210602144718 - CreateTestTable | Regular | 2.0 s | :warning: | +32.00 KiB |

####  Migration: <b>20210604232017 - DropTestTable</b>

* Type: Post deploy
* Duration: 1.2 s
* Database size change: -24.00 KiB

| Query | Calls | Total Time | Max Time | Mean Time | Rows |
| ----- | ----- | ---------- | -------- | --------- | ---- |
| <pre>DROP&nbsp;TABLE&nbsp;"test_tables"&nbsp;&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 5.7 ms | 5.7 ms | 5.7 ms | 0 |
#### :warning: Migration: <b>20210602144718 - CreateTestTable</b>

* Type: Regular
* Duration: 2.0 s
* Database size change: +32.00 KiB

| Query | Calls | Total Time | Max Time | Mean Time | Rows |
| ----- | ----- | ---------- | -------- | --------- | ---- |
| <pre>CREATE&nbsp;TABLE&nbsp;"test_tables"&nbsp;("id"&nbsp;bigserial&nbsp;primary&nbsp;key,&nbsp;"stars"&nbsp;bigint&nbsp;DEFAULT&nbsp;0&nbsp;NOT&nbsp;NULL,&nbsp;"created_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"updated_at"&nbsp;timestamp(6)&nbsp;NOT&nbsp;NULL,&nbsp;"title"&nbsp;text,&nbsp;"notes"&nbsp;text)&nbsp;&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 269.9 ms | 269.9 ms | 269.9 ms | 0 |
| <pre>ALTER&nbsp;TABLE&nbsp;"test_tables"&nbsp;ADD&nbsp;CONSTRAINT&nbsp;"check_0770ba173a"&nbsp;CHECK&nbsp;(char_length("title")&nbsp;<=&nbsp;128),&nbsp;ADD&nbsp;CONSTRAINT&nbsp;"check_9cfc473dbc"&nbsp;CHECK&nbsp;(char_length("notes")&nbsp;<=&nbsp;1024)<br />&#x2F;&#x2A;application:test&#x2A;&#x2F;</pre> | 1 | 24.7 ms | 24.7 ms | 24.7 ms | 0 |
| <pre>SELECT&nbsp;$1::regtype::oid</pre> | 1 | 0.0 ms | 0.0 ms | 0.0 ms | 1 |

<details>
  <summary>Other migrations pending on GitLab.com</summary>

  | Migration | Type | Total runtime | Result | DB size change |
| --------- | ---- | ------------- | ------ | -------------- |

</details>

#### Clone Details
| Clone ID | Clone Created At | Clone Data Timestamp | Expected Removal Time |
| -------- | ---------------- | -------------------- | --------------------- |
| [`database-testing-639298`](https://console.postgres.ai/gitlab/gitlab-production-tunnel/instances/59/clones/database-testing-639298) | 2021-06-07 14:42:21 UTC | 2021-06-07 12:00:26 UTC | 2021-06-08 02:43:37 +0000 |

#### [Artifacts](/-/jobs//artifacts/browse/migration-testing/)

---
Brought to you by [gitlab-org/database-team/gitlab-com-database-testing](https://gitlab.com/gitlab-org/database-team/gitlab-com-database-testing). [Epic](https://gitlab.com/groups/gitlab-org/database-team/-/epics/9)
<!-- JSON: eyJ2ZXJzaW9uIjoxLCJkYXRhIjpbe30se31dfQ==
 -->